<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NFT | Needless Funding Tournament</title>
  <style>
    body {
      font-family: 'Helvetica Neue', sans-serif;
      text-align: center;
      background-color: #fff8f0;
      margin: 0;
      padding: 20px;
    }
    h1 {
      font-size: 28px;
    }
    #countDisplay {
      font-size: 20px;
      margin-top: 10px;
    }
    .muda-button {
      background-color: crimson;
      color: white;
      font-size: 20px;
      padding: 16px 40px;
      margin: 20px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
    }
    .muda-button:hover {
      background-color: darkred;
    }
    #history {
      margin-top: 30px;
      max-width: 300px;
      margin-left: auto;
      margin-right: auto;
    }
    #ranking {
      margin-top: 30px;
    }
    .badge {
      font-weight: bold;
      color: orange;
    }
  </style>
</head>
<body>
  <h1>NFT | Needless Funding Tournament</h1>
  <div id="countDisplay">あなたの無駄：<span id="count">0</span> 回</div>

  <div style="margin-top: 10px;">
    あなたの年収（円）：<input type="number" id="income" value="2000000" />
  </div>
  <div id="mudaIndex">MUDA Index: <span id="indexValue">0%</span></div>

  <button class="muda-button" onclick="addMuda()">🔥 MUDA課金 🔥</button>

  <div id="history">
    <h3>MUDA履歴:</h3>
    <ul id="historyList"></ul>
  </div>

  <div id="ranking">
    <h3>ランキング（仮）</h3>
    🌍世界1位：BurnMaster999（<span id="worldCount">999</span>回）<br>
    🇯🇵日本1位：Kaichiro（<span id="japanCount">123</span>回）<br>
    🏡地域1位：You（今ここ）<br>
  </div>

  <div id="titleBadge" class="badge"></div>

  <script>
    let count = 0;
    const historyList = document.getElementById("historyList");

    function updateIndex() {
      const income = parseFloat(document.getElementById("income").value);
      const mudaIndex = (count / (income / 100000)) * 100;
      document.getElementById("indexValue").innerText = mudaIndex.toFixed(1) + "%";
    }

    function updateTitleBadge() {
      const badge = document.getElementById("titleBadge");
      if (count >= 200) badge.innerText = "👑 MUDA帝王 👑";
      else if (count >= 100) badge.innerText = "🔥 Burn King 🔥";
      else if (count >= 50) badge.innerText = "💸 MUDA王子 💸";
      else if (count >= 20) badge.innerText = "🧯浪費貴族 🧯";
      else badge.innerText = "";
    }

    function addMuda() {
      count++;
      document.getElementById("count").innerText = count;
      const now = new Date();
      const timeStr = `${now.getFullYear()}/${now.getMonth()+1}/${now.getDate()} ${now.getHours()}:${now.getMinutes().toString().padStart(2,'0')}:${now.getSeconds().toString().padStart(2,'0')}`;
      const entry = document.createElement("li");
      entry.textContent = `🔥 ${timeStr} - MUDA ${count}回目`;
      historyList.insertBefore(entry, historyList.firstChild);
      if (historyList.children.length > 10) {
        historyList.removeChild(historyList.lastChild);
      }
      updateIndex();
      updateTitleBadge();
    }

    document.getElementById("income").addEventListener("input", updateIndex);
    updateIndex();
  </script>
</body>
</html>
